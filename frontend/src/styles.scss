// ============================================
// Taskify Global Styles
// ============================================

@use "variables" as v;
@use "typography" as t;
@use "theme";

// ============================================
// Base Styles
// ============================================
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}

body {
  font-family: v.$font-family-sans;
  font-size: v.$font-size-sm;
  line-height: v.$line-height-normal;
  color: v.$text-primary;
  background: v.$background-secondary;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

// ============================================
// Typography
// ============================================
h1, h2, h3, h4, h5, h6 {
  margin: 0 0 v.$space-3;
  font-weight: v.$font-weight-semibold;
  line-height: v.$line-height-tight;
  color: v.$text-primary;
}

h1 { font-size: v.$font-size-3xl; }
h2 { font-size: v.$font-size-2xl; }
h3 { font-size: v.$font-size-xl; }
h4 { font-size: v.$font-size-lg; }
h5 { font-size: v.$font-size-md; }
h6 { font-size: v.$font-size-sm; }

p {
  margin: 0 0 v.$space-4;
  color: v.$text-secondary;
}

a {
  color: v.$text-link;
  text-decoration: none;
  transition: color v.$transition-fast;

  &:hover {
    color: v.$text-link-hover;
    text-decoration: underline;
  }
}

// ============================================
// Layout Components
// ============================================
.container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 v.$space-5;
}

.page-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: v.$space-5 0;
  margin-bottom: v.$space-5;
  border-bottom: 1px solid v.$border-default;

  h1 {
    margin: 0;
    font-size: v.$font-size-2xl;
  }
}

// ============================================
// Card Components (GitHub style)
// ============================================
.card {
  background: v.$background-primary;
  border: 1px solid v.$border-default;
  border-radius: v.$radius-md;
  padding: v.$space-4;
  transition: box-shadow v.$transition-normal, border-color v.$transition-normal;

  &:hover {
    box-shadow: v.$shadow-md;
  }

  &--clickable {
    cursor: pointer;

    &:hover {
      border-color: v.$border-emphasis;
    }
  }
}

.card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: v.$space-3;
  margin-bottom: v.$space-3;
  border-bottom: 1px solid v.$border-muted;
}

.card-title {
  font-size: v.$font-size-md;
  font-weight: v.$font-weight-semibold;
  color: v.$text-primary;
  margin: 0;
}

.card-body {
  color: v.$text-secondary;
}

// ============================================
// Button Styles (GitHub style)
// ============================================
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: v.$space-2;
  padding: 5px 16px;
  font-size: v.$font-size-sm;
  font-weight: v.$font-weight-medium;
  line-height: 20px;
  border-radius: v.$radius-md;
  border: 1px solid transparent;
  cursor: pointer;
  transition: all v.$transition-fast;
  white-space: nowrap;

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .mat-icon {
    font-size: 16px;
    width: 16px;
    height: 16px;
  }
}

.btn-primary {
  background: v.$primary;
  color: v.$text-inverse;
  border-color: v.$primary;

  &:hover:not(:disabled) {
    background: v.$primary-dark;
    border-color: v.$primary-dark;
  }
}

.btn-success {
  background: v.$success;
  color: v.$text-inverse;
  border-color: v.$success;

  &:hover:not(:disabled) {
    background: v.$success-600;
    border-color: v.$success-600;
  }
}

.btn-danger {
  background: v.$error;
  color: v.$text-inverse;
  border-color: v.$error;

  &:hover:not(:disabled) {
    background: v.$error-500;
    border-color: v.$error-500;
  }
}

.btn-outline {
  background: v.$background-primary;
  color: v.$text-primary;
  border-color: v.$border-default;

  &:hover:not(:disabled) {
    background: v.$background-secondary;
    border-color: v.$border-emphasis;
  }
}

.btn-ghost {
  background: transparent;
  color: v.$text-secondary;
  border-color: transparent;

  &:hover:not(:disabled) {
    background: v.$background-secondary;
    color: v.$text-primary;
  }
}

.btn-sm {
  padding: 3px 12px;
  font-size: v.$font-size-xs;
}

.btn-lg {
  padding: 10px 24px;
  font-size: v.$font-size-md;
}

// ============================================
// Form Styles
// ============================================
.small-centered-form {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  margin: v.$space-8 auto;
  width: 100%;
  max-width: 400px;
  background-color: v.$background-primary;
  box-shadow: v.$shadow-lg;
  border: 1px solid v.$border-default;
  border-radius: v.$radius-lg;
  padding: v.$space-6;
}

form {
  mat-form-field {
    width: 100%;
  }

  input,
  button {
    width: 100%;
  }
}

.form-group {
  margin-bottom: v.$space-4;
}

.form-label {
  display: block;
  margin-bottom: v.$space-2;
  font-size: v.$font-size-sm;
  font-weight: v.$font-weight-medium;
  color: v.$text-primary;
}

.form-input {
  width: 100%;
  padding: 5px 12px;
  font-size: v.$font-size-sm;
  line-height: 20px;
  color: v.$text-primary;
  background: v.$background-primary;
  border: 1px solid v.$border-default;
  border-radius: v.$radius-md;
  transition: border-color v.$transition-fast, box-shadow v.$transition-fast;

  &:focus {
    outline: none;
    border-color: v.$primary;
    box-shadow: 0 0 0 3px rgba(0, 82, 204, 0.1);
  }

  &::placeholder {
    color: v.$text-tertiary;
  }
}

// ============================================
// Badge / Label Styles (Atlassian style)
// ============================================
.badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 8px;
  font-size: v.$font-size-xs;
  font-weight: v.$font-weight-medium;
  line-height: 18px;
  border-radius: v.$radius-full;
  text-transform: capitalize;
}

.badge-primary {
  background: v.$primary-50;
  color: v.$primary-600;
}

.badge-success {
  background: v.$success-50;
  color: v.$success-600;
}

.badge-warning {
  background: v.$warning-50;
  color: v.$warning-700;
}

.badge-danger {
  background: v.$error-50;
  color: v.$error-500;
}

.badge-neutral {
  background: v.$gray-100;
  color: v.$gray-600;
}

// Role badges
.badge-admin {
  background: v.$primary-50;
  color: v.$role-admin;
}

.badge-editor {
  background: v.$success-50;
  color: v.$role-editor;
}

.badge-viewer {
  background: v.$gray-100;
  color: v.$role-viewer;
}

// ============================================
// Avatar Styles
// ============================================
.avatar {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: v.$radius-full;
  background: v.$primary;
  color: v.$text-inverse;
  font-size: v.$font-size-sm;
  font-weight: v.$font-weight-semibold;
  text-transform: uppercase;

  &--sm {
    width: 24px;
    height: 24px;
    font-size: v.$font-size-xs;
  }

  &--lg {
    width: 48px;
    height: 48px;
    font-size: v.$font-size-lg;
  }

  &--xl {
    width: 64px;
    height: 64px;
    font-size: v.$font-size-2xl;
  }
}

// ============================================
// Alert / Notice Styles
// ============================================
.alert {
  display: flex;
  align-items: flex-start;
  gap: v.$space-3;
  padding: v.$space-4;
  border-radius: v.$radius-md;
  font-size: v.$font-size-sm;
  line-height: v.$line-height-normal;

  .mat-icon {
    flex-shrink: 0;
  }
}

.alert-info {
  background: v.$primary-50;
  color: v.$primary-700;
  border: 1px solid v.$primary-100;
}

.alert-success {
  background: v.$success-50;
  color: v.$success-700;
  border: 1px solid v.$success-100;
}

.alert-warning {
  background: v.$warning-50;
  color: v.$warning-700;
  border: 1px solid v.$warning-100;
}

.alert-error {
  background: v.$error-50;
  color: v.$error-600;
  border: 1px solid v.$error-100;
}

// ============================================
// Utility Classes
// ============================================
.button-group {
  display: flex;
  gap: v.$space-3;
}

.text-center { text-align: center; }
.text-left { text-align: left; }
.text-right { text-align: right; }

.text-primary { color: v.$text-primary; }
.text-secondary { color: v.$text-secondary; }
.text-muted { color: v.$text-tertiary; }
.text-link { color: v.$text-link; }
.text-success { color: v.$success; }
.text-danger { color: v.$error; }
.text-warning { color: v.$warning; }

.font-medium { font-weight: v.$font-weight-medium; }
.font-semibold { font-weight: v.$font-weight-semibold; }
.font-bold { font-weight: v.$font-weight-bold; }

.mt-0 { margin-top: 0; }
.mt-1 { margin-top: v.$space-1; }
.mt-2 { margin-top: v.$space-2; }
.mt-3 { margin-top: v.$space-3; }
.mt-4 { margin-top: v.$space-4; }
.mt-5 { margin-top: v.$space-5; }

.mb-0 { margin-bottom: 0; }
.mb-1 { margin-bottom: v.$space-1; }
.mb-2 { margin-bottom: v.$space-2; }
.mb-3 { margin-bottom: v.$space-3; }
.mb-4 { margin-bottom: v.$space-4; }
.mb-5 { margin-bottom: v.$space-5; }

.flex { display: flex; }
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.justify-between { justify-content: space-between; }
.justify-center { justify-content: center; }
.gap-1 { gap: v.$space-1; }
.gap-2 { gap: v.$space-2; }
.gap-3 { gap: v.$space-3; }
.gap-4 { gap: v.$space-4; }

// ============================================
// Drag and Drop (CDK)
// ============================================
.cdk-drag-preview {
  padding: v.$space-4;
  background: v.$background-primary;
  box-sizing: border-box;
  border-radius: v.$radius-md;
  border: 1px solid v.$border-emphasis;
  box-shadow: v.$shadow-xl;
}

.cdk-drag-placeholder {
  opacity: 0.4;
}

.cdk-drag-animating {
  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
}

// ============================================
// Empty State
// ============================================
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: v.$space-9;
  text-align: center;

  .mat-icon {
    font-size: 48px;
    width: 48px;
    height: 48px;
    color: v.$text-tertiary;
    margin-bottom: v.$space-4;
  }

  h3 {
    margin-bottom: v.$space-2;
    color: v.$text-primary;
  }

  p {
    color: v.$text-secondary;
    margin-bottom: v.$space-4;
  }
}

// ============================================
// Link Styles
// ============================================
.kb-link {
  @include t.kb-link;
}

// ============================================
// Responsive Helpers
// ============================================
@media (max-width: 768px) {
  .container {
    padding: 0 v.$space-4;
  }

  .small-centered-form {
    margin: v.$space-4;
    padding: v.$space-4;
  }

  .button-group {
    flex-direction: column;
  }
}
